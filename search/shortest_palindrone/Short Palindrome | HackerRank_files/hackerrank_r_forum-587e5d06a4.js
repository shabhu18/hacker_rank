(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{4:function(e,t){},"9+I7":function(e,t,a){"use strict";a.r(t),a.d(t,"PureForum",(function(){return o}));var n=a("cDcd"),r=a.n(n),s=a("17x9"),c=a.n(s);a("kDg/");function o(e){var t=e.children;return r.a.createElement("section",{className:"forum theme-m plB"},t)}o.propTypes={children:c.a.node.isRequired},t.default=o},AJAR:function(e,t,a){},EKMi:function(e,t,a){"use strict";a.r(t);a("8+KV"),a("a1Th"),a("h7Nl"),a("I5cv"),a("bWfx"),a("f3/d"),a("rGqo"),a("yt8O"),a("XfO3"),a("T39b");var n=a("RIqP"),r=a.n(n),s=a("lwsE"),c=a.n(s),o=a("W8MJ"),l=a.n(o),i=a("PJYZ"),m=a.n(i),d=a("7W2i"),u=a.n(d),p=a("a1gu"),h=a.n(p),g=a("Nsbk"),f=a.n(g),E=a("lSNA"),v=a.n(E),b=a("cDcd"),y=a.n(b),k=a("17x9"),N=a.n(k),C=a("/MKj"),x=a("ANjH"),S=a("TSYQ"),_=a.n(S),w=a("xeH2"),D=a.n(w),A=a("O766"),R=a("z5MK"),j=a("8HIh"),B=a("q5NV"),M=a("l6eo"),L=a("PbPj"),T=a("XFB+"),O=a("foLx"),P=a("eOGF"),q=a("5J+W"),F=a("cK/l"),I=a("vB39"),H=(a("V+eJ"),a("Tze0"),a("KKXr"),a("MVZn")),K=a.n(H),V=a("DM5n"),z=a("ZaSc"),J=a("XFkK");a("rlHG");function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var r=f()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var W=function(e){u()(a,e);var t=U(a);function a(){var e;c()(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),v()(m()(e),"loadData",Object(P.e)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0,n=e.props,r=n.challenge,s=n.contestSlug;if(!(t.length<3))return Object(z.b)({url:Object(V.e)("commentSearch",{challengeSlug:r.slug,contestSlug:s}),data:{q:t},success:function(e){a(e.comments)}})}),300)),v()(m()(e),"onSelect",(function(t,a){var n=e.props.appUtil,r=n.router,s=n.location,c=e.props.challenge;r.push(K()({},s,{pathname:"".concat(Object(F.f)(c),"/forum/comments/").concat(a.id)}))})),v()(m()(e),"renderSearchItem",(function(e,t){var a=t.trim().split(/\s+/).map((function(e){return e.toLowerCase()})),n=e.description.trim().split(/\s+/),r=n.map((function(e){return e.toLowerCase()})),s=0;a.forEach((function(e){var t=r.indexOf(e);-1!==t&&(n[t]="<span style='background-color: yellow'>".concat(n[t],"</span>"),s=t>s?t:s)}));var c=s+10,o=c<=n.length;return y.a.createElement("div",{className:"no-padding inline-block"},y.a.createElement("div",{className:"search-row"},y.a.createElement("div",{className:"search-content"},y.a.createElement("p",{dangerouslySetInnerHTML:{__html:"".concat(n.slice(0,c).join(" ")).concat(o?"...":"")}}))))})),e}return l()(a,[{key:"render",value:function(){return y.a.createElement("div",{className:"forum-autocomplete pull-left msL"},y.a.createElement(J.a,{type:"text",id:"search-comment-text",className:"search-query forum-input","data-analytics":"ForumSearchBox",placeholder:"Search comments...",loadData:this.loadData,onSelect:this.onSelect,renderItem:this.renderSearchItem,getItemValue:function(e){return e.description},showDefaultLoader:!0}))}}]),a}(y.a.Component);v()(W,"propTypes",{contestSlug:N.a.string,challenge:N.a.object.isRequired});var G=W=Object(q.a)(W),Y=a("Gwnu"),X=a("7fp8");function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var r=f()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}a.d(t,"PureCommentList",(function(){return $}));var Q=function(e){u()(a,e);var t=Z(a);function a(e){var n;return c()(this,a),n=t.call(this,e),v()(m()(n),"state",void 0),v()(m()(n),"postCommentErrorElement",void 0),v()(m()(n),"postComment",(function(){var e=n.state,t=e.commentDescription,a=e.selectedExperts,s=e.postingDisabled,c=e.askExperts,o=n.props,l=o.challenge,i=o.contestSlug,m=o.forumActions,d=o.experts;if(!s)return t.length<3?(n.setState({postingDisabled:!1,expanded:!1}),void n.showErrorMessage("Comment should contain at least 3 characters.")):void(d>0&&c&&a.size<1?n.setState({noExpertsSelected:!0}):(n.setState({postingDisabled:!0}),Object(L.b)({recaptchaKey:X.c.RECAPTCHA_KEY_V3,action:"postComment"}).then((function(e){var n={description:t,challengeSlug:l.slug,contestSlug:i,expert_set:!1,expert_ids:[],g_recaptcha_response:e};return a.size>0&&(n.expert_set=!0,n.expert_ids=r()(a)),m.postComment(n)})).then((function(e){e&&e.error&&n.showErrorMessage(e.error),n.setState({postingDisabled:!1,expanded:!1})})).catch((function(){n.setState({postingDisabled:!1,expanded:!1}),n.showErrorMessage()}))))})),v()(m()(n),"showErrorMessage",(function(e){D()(n.postCommentErrorElement).html(e||"Sorry, posting comment failed. Please try again."),D()(n.postCommentErrorElement).fadeIn("slow",(function(){D()(n.postCommentErrorElement).delay(3e3).fadeOut("slow")}))})),v()(m()(n),"onDescriptionChange",(function(e){n.setState({commentDescription:e})})),v()(m()(n),"loadMoreComments",(function(){var e=n.props,t=e.commentIds,a=e.sortedBy,r=e.challenge,s=e.contestSlug,c=e.forumActions;n.state.disableLoadMore||(n.setState({disableLoadMore:!0}),c.getCommentList({offset:t.length,sortBy:a,challengeSlug:r.slug,contestSlug:s}).then((function(){n.setState({disableLoadMore:!1})})))})),v()(m()(n),"updateExpertList",(function(e){var t=new Set(r()(n.state.selectedExperts));if(t.has(e))t.delete(e);else{if(n.state.selectedExperts.size>=3)return null;t.add(e)}n.setState({selectedExperts:t})})),v()(m()(n),"sortBy",(function(e){var t=n.props,a=t.sortedBy,r=t.challenge,s=t.contestSlug,c=t.forumActions,o=n.state.sortingDisabled;e===a||o||(n.setState({sortingDisabled:!0}),c.getCommentList({sortBy:e,challengeSlug:r.slug,contestSlug:s}).then((function(){n.setState({sortingDisabled:!1})})))})),v()(m()(n),"toggleAskExpertsCheckBox",(function(){n.setState({askExperts:!n.state.askExperts})})),n.state={selectedExperts:new Set,commentDescription:""},n}return l()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.challenge,n=t.contestSlug,r=t.profile,s=t.forumActions,c=t.experts;r.username&&(!c||c.length<1)&&s.getExpertList({challengeSlug:a.slug,contestSlug:n}).then((function(){e.setState({expertListLoaded:!0})}))}},{key:"renderCommentHeader",value:function(){var e=this,t=this.props,a=t.profile,n=t.challenge,r=(t.experts,t.appUtil),s=this.state,c=s.expanded,o=s.commentDescription,l=s.postingDisabled,i=(s.askExperts,s.noExpertsSelected),m=c?"min-height-s max-height-s":"min-height-u max-height-u";return a.username?y.a.createElement("div",{className:"clearfix comment-box"},y.a.createElement("div",{className:"comment-avatar"},y.a.createElement("div",{className:"discussion-avatar avatar pmR"},y.a.createElement(O.a,{name:a.name,size:40,avatar:a.avatar}))),y.a.createElement("div",{className:"pull-left comment-editor comment-editor-not-focused"},y.a.createElement("div",{className:"mkd-container mkd-toolbar-container"},y.a.createElement(B.a,{showMkdCheatsheet:!0,showCodeSnippetToolbarOption:!0,classNames:m,onChange:this.onDescriptionChange,textValue:o,onFocus:function(){e.state.expanded||e.setState({expanded:!0})}})),c&&y.a.createElement("div",{className:"psT psB pull-right post-button-wrap"},y.a.createElement("a",{onClick:this.postComment,className:_()("btn btn-primary add-comment",{disabled:l}),"data-analytics":"ForumAddComment","data-attr1":n.slug,"data-attr4":"comment"},l?"Posting...":"Post comment")),y.a.createElement("div",null,y.a.createElement("small",{ref:function(t){e.postCommentErrorElement=t},className:"error hide msB"}))),i&&y.a.createElement(A.a,{theme:"theme-m",title:"No Expert Selected",open:!0,onClose:function(){e.setState({noExpertsSelected:!1})},size:"small"},y.a.createElement("p",null,"Please choose experts from the right sidebar before posting."))):y.a.createElement("div",{className:"banner mlB"},y.a.createElement("p",null,"Please"," ",y.a.createElement("a",{className:"login-link cursor","data-analytics":"AuthDialog","data-attr1":"Forum",onClick:function(){r.isAuthRequired({type:"info",data:"Please signup or login to start a discussion."})}},"Login")," ","in order to post a comment"))}},{key:"renderExpertsList",value:function(){var e=this,t=this.props.experts,a=this.state,n=a.expanded,r=a.selectedExperts;return!a.askExperts||!t||t.length<1||!n?null:y.a.createElement("div",{className:"experts-wrap span6 pull-right"},y.a.createElement("div",{className:"challenge-experts"},y.a.createElement("p",null,"Direct your questions at up to 3 topic experts to get a quick response."," ",r.size>0&&y.a.createElement("span",null,y.a.createElement("span",{className:"selected-count bold"},"(".concat(r.size,"/3 selected)")))),t.map((function(t,a){return y.a.createElement("div",{key:t.id,onClick:function(){e.updateExpertList(t.id)},className:_()("experts-list cursor clearfix psT",{selected:r.has(t.id)}),"data-expert-position":a,"data-expert-id":t.id},y.a.createElement("span",{className:"expert-avatar-container"},r.has(t.id)&&y.a.createElement("i",{className:"icon--single icon-ok-circled expert-selected-icon"}),y.a.createElement("i",{className:"icon--single icon-cancel-circled expert-remove-icon"}),y.a.createElement("img",{src:t.avatar,alt:"",className:"avatar experts-avatar pull-left",width:"25",height:"25"})),y.a.createElement("p",{className:"expert-username pull-left psL"},y.a.createElement("a",{className:"backbone"},t.username),y.a.createElement("span",{className:"expert-why small color-alt-grey"},t.why&&", ".concat(t.why))))}))))}},{key:"renderLoadMore",value:function(){var e=this.props,t=e.commentIds,a=e.total,n=this.state.disableLoadMore;return 0===t.length?y.a.createElement("div",{className:"msB fbt-wt-600 pull-left"},y.a.createElement("p",null,"Nobody is talking about this challenge yet. Why not start the first discussion?")):t.length<a?y.a.createElement("div",{className:"msB more-comment-list fbt-wt-600 cursor mjT pdT"},y.a.createElement("a",{onClick:this.loadMoreComments,className:"btn btn-primary btn-large active","data-analytics":"LoadMoreConversations"},n?"Loading...":"Load more conversations")):y.a.createElement("div",{className:"msB fbt-wt-600 pull-left"},y.a.createElement("p",null,"No more comments"))}},{key:"renderHeader",value:function(){var e=this,t=this.props,a=t.total,n=t.sortedBy,r=t.challenge,s=t.contestSlug,c=this.state.sortingDisabled;return y.a.createElement("div",{className:"comment-header-view"},y.a.createElement("div",{className:"discussion-header psA clearfix"},y.a.createElement("div",{className:"pull-left"},y.a.createElement("p",null,"Sort ",a," ",Object(P.M)("Discussion",a),", By:")),y.a.createElement(M.d,{disabled:c,closeHandleSelector:".dropdown-menu li",className:"select-wrap pull-left msL small"},y.a.createElement("a",{className:"dropdown-handle cursor dropdown-toggle clearfix select-wrap"},y.a.createElement("span",{className:"select"},y.a.createElement("span",{id:"comment-current-sort",className:"text"},n)),y.a.createElement("span",{className:"indent"},y.a.createElement("b",{className:"caret"}))),y.a.createElement("ul",{className:"dropdown-menu unstyled"},y.a.createElement("li",null,y.a.createElement("a",{onClick:function(){return e.sortBy("recency")},className:"comment-sort-option"},"recency")),y.a.createElement("li",null,y.a.createElement("a",{onClick:function(){return e.sortBy("votes")},className:"comment-sort-option"},"votes")))),y.a.createElement("div",{className:"pull-left msL"},y.a.createElement(G,{contestSlug:s,challenge:r}))),y.a.createElement("div",{className:"forum-post-abtest row"},y.a.createElement("div",{className:"discussion-newcomment span9 msT"},this.renderCommentHeader()),y.a.createElement("div",{className:"js-error-msg-wrap span6 pull-right plA small bold hide"},y.a.createElement("p",{className:"js-msg error"}))))}},{key:"renderCommentsContainer",value:function(){var e=this.props,t=e.commentIds,a=e.commentsDict,n=e.challenge,r=e.contestSlug;return y.a.createElement("div",{className:"comments-container"},t.map((function(e){var t=a[e];return y.a.createElement("ul",{key:e,className:"has-string discussion-comments"},y.a.createElement(T.a,{comment:t,challenge:n,contestSlug:r}))})))}},{key:"render",value:function(){var e=this.props.challenge;return y.a.createElement("div",{className:"container panes-container clearfix"},y.a.createElement(L.a,{recaptchaKey:X.c.RECAPTCHA_KEY_V3}),y.a.createElement(R.a,{className:"left-pane"},y.a.createElement(R.a.Content,{className:"tab-content pjA"},this.renderHeader(),this.renderCommentsContainer(),this.renderLoadMore())),e&&y.a.createElement("aside",{className:"right-pane challenge-sidebar"},y.a.createElement(Y.a,{challenge:e})))}}]),a}(y.a.Component);v()(Q,"propTypes",{commentIds:N.a.array.isRequired,commentsDict:N.a.object.isRequired,profile:N.a.object.isRequired,total:N.a.number,sortedBy:N.a.string,contestSlug:N.a.string,forumActions:N.a.object.isRequired,appUtil:N.a.object.isRequired,challenge:N.a.object.isRequired,experts:N.a.array});var $=Q;Q=Object(C.c)((function(e,t){var a=t.appUtil.params,n=a.challengeSlug,r=a.contestSlug,s=e.community.forum,c=s.comments,o=s.commentsDict,l=e.community.profile,i=Object(F.d)(e,a).detail,m=c[Object(I.a)({challengeSlug:n,contestSlug:r})],d=m||{},u=d.total,p=d.sortedBy,h=d.experts,g=(m||{}).list,f=void 0===g?[]:g,E=[],v=[];return f.forEach((function(e){o[e].pinned?E.push(e):v.push(e)})),{commentIds:f=E.concat(v),total:u,sortedBy:p,commentsDict:o,profile:l,challengeSlug:n,contestSlug:r,challenge:i,experts:h}}),(function(e){return{forumActions:Object(x.b)(j.a,e)}}))(Q),Q=Object(q.a)(Q);t.default=Q},Gwnu:function(e,t,a){"use strict";a("LK8F"),a("Z2Ku"),a("L9s1");var n=a("cDcd"),r=a.n(n),s=a("17x9"),c=a.n(s),o=a("MGin"),l=a("TSYQ"),i=a.n(l),m=a("ANjH"),d=a("5J+W"),u=a("cK/l");a("JGr0");function p(e){var t=e.slug,a=e.linkText,n=e.icon,s=e.dataAttr,c=e.challenge,l=e.appUtil,m=l.params,d=m.challengeSlug,p=m.contestSlug,h=void 0===p?"master":p,g=l.isRouteActive,f="".concat(Object(u.f)(c),"/").concat(t);return g(f)?null:r.a.createElement("div",{className:"link-wrapper"},r.a.createElement(o.Link,{to:f,"data-analytics":"ChallengeSidebarUI","data-attr1":s,"data-attr2":d,"data-attr3":h},r.a.createElement("i",{className:i()(n,"ui-icon-grey sidebar-icon")}),r.a.createElement("span",{className:"ui-icon-label"},a)))}var h=function(e){var t=e.challenge,a=e.challenge,n=a.custom_tabs,s=a.is_editorial_available,c=a.kind,o=e.appUtil.location.pathname.includes("/forum"),l="mcq"===c,i=!!(Array.isArray(n)?n.length:n);return!i&&!s&&l&&o?null:r.a.createElement("div",{className:"challenge-sidebar-help"},r.a.createElement("h2",{className:"text-sec-headline-s"},"Need Help?"),r.a.createElement("hr",{className:"hr-line-light"}),r.a.createElement("div",{className:"mlB"},!!i&&r.a.createElement(p,{slug:"tutorial",linkText:"View tutorial",icon:"ui-icon-tutorial",dataAttr:"tutorial",challenge:t}),r.a.createElement(p,{slug:"forum",linkText:"View discussions",icon:"ui-icon-discussion",dataAttr:"discussions",challenge:t}),s&&r.a.createElement(p,{slug:"editorial",linkText:"View editorial",icon:"ui-icon-editorial",dataAttr:"editorial",challenge:t}),!l&&r.a.createElement(p,{slug:"leaderboard",linkText:"View top submissions",icon:"ui-icon-trophy",dataAttr:"topscorers",challenge:t})))};p.propTypes={appUtil:c.a.object.isRequired,slug:c.a.string.isRequired,linkText:c.a.string.isRequired,icon:c.a.string.isRequired,dataAttr:c.a.string.isRequired,challenge:c.a.object.isRequired},h.propTypes={challenge:c.a.object.isRequired};p=Object(d.a)(p),t.a=Object(m.d)(d.a)(h)},JGr0:function(e,t,a){},"XFB+":function(e,t,a){"use strict";a("a1Th"),a("h7Nl"),a("I5cv"),a("f3/d"),a("bWfx"),a("0l/t");var n=a("lwsE"),r=a.n(n),s=a("W8MJ"),c=a.n(s),o=a("PJYZ"),l=a.n(o),i=a("7W2i"),m=a.n(i),d=a("a1gu"),u=a.n(d),p=a("Nsbk"),h=a.n(p),g=a("lSNA"),f=a.n(g),E=a("cDcd"),v=a.n(E),b=a("17x9"),y=a.n(b),k=a("TSYQ"),N=a.n(k),C=a("MGin"),x=a("/MKj"),S=a("ANjH"),_=a("eOGF"),w=a("p0DI"),D=a("q5NV"),A=a("LlRK"),R=a.n(A),j=a("O766"),B=a("foLx"),M=a("xeH2"),L=a.n(M),T=a("5J+W"),O=a("PbPj"),P=a("8HIh"),q=a("fe33"),F=a("cK/l"),I=a("saer"),H=a("7fp8");a("AJAR");function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}var V=function(e){m()(a,e);var t=K(a);function a(e){var n;return r()(this,a),n=t.call(this,e),f()(l()(n),"state",void 0),f()(l()(n),"addCommentErrorElement",void 0),f()(l()(n),"editCommentErrorElement",void 0),f()(l()(n),"onReplyChange",(function(e){n.setState({replyDescription:e})})),f()(l()(n),"onEdit",(function(e){n.setState({editedDescription:e})})),f()(l()(n),"showErrorMessage",(function(e,t){L()(e).html(t||"Sorry, posting comment failed. Please try again."),L()(e).fadeIn("slow",(function(){L()(e).delay(3e3).fadeOut("slow")}))})),f()(l()(n),"addReply",(function(){var e=n.props,t=e.challenge,a=e.contestSlug,r=e.comment,s=n.state,c=s.replyDescription;if(!s.postingDisabled){if(c.length<3)return n.setState({postingDisabled:!1}),void n.showErrorMessage(n.addCommentErrorElement,"Comment should contain at least 3 characters.");n.setState({postingDisabled:!0}),Object(O.b)({recaptchaKey:H.c.RECAPTCHA_KEY_V3,action:"postComment"}).then((function(e){var s={challengeSlug:t.slug,contestSlug:a,parent_id:r.id,description:c,g_recaptcha_response:e};return n.props.forumActions.postComment(s)})).then((function(e){e&&e.error?(n.showErrorMessage(n.addCommentErrorElement,e.error),n.setState({postingDisabled:!1})):n.setState({postingDisabled:!1,showAddCommentBox:!1,replyDescription:""})}),(function(){n.setState({postingDisabled:!1}),n.showErrorMessage(n.addCommentErrorElement)}))}})),f()(l()(n),"saveEdit",(function(){var e=n.state,t=e.editedDescription,a=e.editDisabled,r=n.props,s=r.challenge,c=r.contestSlug,o=r.comment;if(!a){if(t.length<3)return n.setState({editDisabled:!1}),void n.showErrorMessage(n.editCommentErrorElement,"Comment should contain at least 3 characters.");n.setState({editDisabled:!0}),n.props.forumActions.editComment({challengeSlug:s.slug,contestSlug:c,commentId:o.id,changedAttributes:{description:t}}).then((function(e){e&&e.error?(n.showErrorMessage(n.editCommentErrorElement,e.error),n.setState({editDisabled:!1})):n.setState({editDisabled:!1,showEditCommentBox:!1})}),(function(){n.setState({editDisabled:!1}),n.showErrorMessage(n.addCommentErrorElement)}))}})),f()(l()(n),"togglePinnedState",(function(){var e=n.props,t=e.challenge,a=e.contestSlug,r=e.comment,s=r.pinned;n.state.pinningDisabled||(n.setState({pinningDisabled:!0}),n.props.forumActions.editComment({challengeSlug:t.slug,contestSlug:a,commentId:r.id,changedAttributes:{pinned:!s}}).then((function(){n.setState({pinningDisabled:!1})})))})),f()(l()(n),"deleteComment",(function(){if(!n.state.deletingComment){n.setState({deletingComment:!0});var e=n.props,t=e.challenge,a=e.contestSlug,r=e.comment;n.props.forumActions.deleteComment({challengeSlug:t.slug,contestSlug:a,commentId:r.id}).then((function(){r.parent_id&&n.setState({deletingComment:!1})}))}})),f()(l()(n),"toggleBanState",(function(){var e=n.props.comment,t=e.hacker_banned_on_forums,a=e.hacker_username;n.props.profileActions.toggleBanStateOfHackerOnForums({toggledValue:"true"!==t&&!0!==t,username:a})})),f()(l()(n),"toggleVote",(function(e){var t=n.props,a=t.challenge,r=t.contestSlug,s=t.comment,c=t.profile,o=t.appUtil,l=s.vote_status;if(!n.state.votingDisabled)if(c.username){s.hacker_id===c.id&&n.setState({votingNotAllowed:!0});var i=0===l?e:"unvote";n.setState({votingDisabled:!0}),n.props.forumActions.toggleVote({challengeSlug:a.slug,contestSlug:r,commentId:s.id,voteType:i}).then((function(){n.setState({votingDisabled:!1})}))}else o.isAuthRequired({type:"info",data:"Please sign up or log in to upvote/downvote a comment."})})),f()(l()(n),"toggleCollapse",(function(){n.setState({minimize:!n.state.minimize})})),f()(l()(n),"appreciateAnswer",(function(){if(!n.state.editDisabled){n.setState({editDisabled:!0});var e=n.props,t=e.challenge,a=e.contestSlug,r=e.comment;n.props.forumActions.editComment({challengeSlug:t.slug,contestSlug:a,commentId:r.id,changedAttributes:{appreciated:!0,appreciate_request:!0}}).then((function(){n.setState({editDisabled:!1})}))}})),n.state={replyDescription:"",editedDescription:""},n}return c()(a,[{key:"isAppreciable",value:function(){var e=this.props,t=e.profile,a=e.comment;return!!t.username&&t.id===a.appreciator&&a.appreciatable}},{key:"canEditDelete",value:function(){var e=this.props,t=e.comment,a=e.profile;if(!a.username)return!1;var n=a.is_admin,r=a.id===t.hacker_id;return!t.deleted&&(r||t.hacker_is_contest_moderator||n)}},{key:"canModerateContest",value:function(){var e=this.props,t=e.comment,a=e.profile;return!!a.username&&(t.hacker_is_contest_moderator||a.is_admin)}},{key:"renderCommentHeader",value:function(){var e=this.props,t=e.comment,a=e.challenge,n=e.contestSlug,r=v.a.createElement("span",null," [DELETED] ");if(t.hacker_username){var s={attribute1:"Forum",attribute2:t.hacker_username,attribute3:n||"master",attribute4:a?a.slug:void 0};r=v.a.createElement(I.a,{user:{username:t.hacker_username},analyticsAttributes:s},v.a.createElement(C.Link,{to:"/".concat(t.hacker_username),"data-analytics":"ForumUserName","data-attr1":a.slug,"data-attr2":t.hacker_username,"data-attr7":t.votes,"data-attr11":t.hacker_is_admin},t.hacker_username))}var c=t.children?t.total_children:0;return v.a.createElement("header",{className:"comment-header"},v.a.createElement("span",{className:"discussion-name"},r,2===t.kind&&v.a.createElement("span",{className:"badge expert "},"Asked to answer"),t.hacker_is_admin&&v.a.createElement("span",{className:"badge moderator"},"HackerRank Admin"),t.hacker_username&&t.hacker_username===a.author_name&&v.a.createElement("span",{className:"badge challenge-author"},"Challenge Author")),v.a.createElement("span",{className:"discussion-details vertical-align-top"},v.a.createElement("i",{className:"icon-clock"})," ",v.a.createElement(R.a,{date:new Date(t.created_at)}),v.a.createElement("span",{className:"is-collapsed-meta comment-count"},"+ ".concat(c," ").concat(Object(_.M)("comment",c))),t.pinned&&v.a.createElement("i",{className:"icon-pin-outline mmL",title:"Pinned comment"})))}},{key:"renderCommentAppreciationBox",value:function(){var e=this.props.comment;return e.deleted?null:this.isAppreciable()?v.a.createElement("div",{className:N()("forum-gold-star msB forum-gold-star-user xsmall no-select","".concat(e.appreciated?"state-disabled":"state-enabled"))},e.appreciated?v.a.createElement("span",{className:"appreciate-container appreciate-answer-remove"},v.a.createElement("i",{className:"icon-star"})," ",v.a.createElement("strong",null," Endorsed by you")):v.a.createElement("span",{onClick:this.appreciateAnswer,className:"appreciate-container appreciate-answer-add"},v.a.createElement("i",{className:"icon-star-empty"})," ",v.a.createElement("strong",null," Endorse this comment"))):e.appreciated?v.a.createElement("div",{className:"forum-gold-star msB xsmall "},v.a.createElement("i",{className:"icon-star"}),v.a.createElement("strong",null," Endorsed by ",e.appreciator_username)):void 0}},{key:"renderCommentContent",value:function(){var e=this.props.comment;return v.a.createElement("div",{className:N()("comment-content hackdown-container theme-m",{"fill-grey":e.deleted})},v.a.createElement("div",{className:"inline-block",dangerouslySetInnerHTML:{__html:e.description_html}}))}},{key:"renderCommentFooter",value:function(){var e=this,t=this.props,a=t.comment,n=t.profile,r=t.challenge,s=a.vote_status,c=this.state,o=c.deletingComment,l=c.votingNotAllowed;return v.a.createElement("footer",{className:"comment-footer"},v.a.createElement("div",null,v.a.createElement("div",{className:N()("discussion-counter",{"is-upvoted":1===a.vote_status,"is-downvoted":2===a.vote_status})},v.a.createElement("a",{className:"discussion-count"},a.votes),(0===s||1===s)&&v.a.createElement("a",{onClick:function(){return e.toggleVote("upvote")},className:"discussion-upvote","data-analytics":"ForumCommentUpvote","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr11":a.hacker_is_admin},v.a.createElement("i",{className:"icon-up-open icon--single"})),(0===s||2===s)&&v.a.createElement("a",{onClick:function(){return e.toggleVote("downvote")},className:"discussion-downvote","data-analytics":"ForumCommentDownvote","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr11":a.hacker_is_admin},v.a.createElement("i",{className:"icon-down-open icon--single"})),v.a.createElement("a",null,"|"),v.a.createElement(j.a,{theme:"theme-m",title:"Can't vote",open:l,onClose:function(){return e.setState({votingNotAllowed:!1})},size:"small"},v.a.createElement("div",{className:"block-center text-center"},"You can't vote your own comment."))),!!n.username&&v.a.createElement("a",{onClick:function(){e.setState({showAddCommentBox:!0})},className:"btn-text show-response","data-analytics":"ForumAddReply","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr3":"Comment","data-attr11":a.hacker_is_admin},"Add Comment"),this.canEditDelete()&&v.a.createElement("a",{onClick:function(){e.setState({editedDescription:a.description,showEditCommentBox:!0})},className:"btn-text edit-comment","data-analytics":"ForumEdit","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr11":a.hacker_is_admin},"Edit"),this.canEditDelete()&&v.a.createElement("a",{onClick:this.deleteComment,className:"btn-text delete-comment","data-analytics":"ForumDelete","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr11":a.hacker_is_admin},o?"Deleting...":"Delete"),a.parent_id&&v.a.createElement(C.Link,{className:"btn-text",to:"".concat(Object(F.f)(r),"/forum/comments/").concat(a.parent_id),"data-analytics":"ForumParentComment","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr11":a.hacker_is_admin},"Parent"),v.a.createElement(C.Link,{className:"btn-text",to:"".concat(Object(F.f)(r),"/forum/comments/").concat(a.id),"data-analytics":"ForumCommentPermalink","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr11":a.hacker_is_admin},"Permalink"),n.is_admin&&v.a.createElement("a",{onClick:this.toggleBanState,className:"btn-text mark-spam","data-analytics":"ForumMarkSpam","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr3":"Comment","data-attr11":a.hacker_is_admin},"true"===a.hacker_banned_on_forums||!0===a.hacker_banned_on_forums?"UnBan":"Ban"," ","Hacker"),!a.parent_id&&this.canModerateContest()&&v.a.createElement("a",{onClick:this.togglePinnedState,className:"btn-text pin-comment","data-analytics":"ForumPinComment","data-attr1":r.slug,"data-attr2":a.hacker_username,"data-attr4":a.pinned,"data-attr11":a.hacker_is_admin}," ",a.pinned?"Unpin Comment":"Pin Comment")))}},{key:"renderAddCommentBox",value:function(){var e=this,t=this.props,a=t.comment,n=t.challenge,r=this.state,s=r.replyDescription,c=r.postingDisabled;return v.a.createElement("div",{className:"comment-response msT clearfix"},v.a.createElement(D.a,{onChange:this.onReplyChange,textValue:s,classNames:"min-height-s max-height-s",options:{placeholder:"Add your reply here."}}),v.a.createElement("p",{className:"psT forum-btn-group"},v.a.createElement("a",{onClick:this.addReply,className:N()("btn msR btn-small add-reply",{disabled:c}),"data-analytics":"ForumAddReply","data-attr1":n.slug,"data-attr2":a.hacker_username,"data-attr3":"Editor","data-attr11":a.hacker_is_admin},c?"Adding...":"Add Comment"),v.a.createElement("a",{onClick:function(){e.setState({showAddCommentBox:!1})},className:"error small cancel-response","data-analytics":"ForumAddReplyCancel","data-attr1":n.slug,"data-attr2":a.hacker_username,"data-attr11":a.hacker_is_admin},v.a.createElement("i",{className:"icon-cancel-small"}),"cancel")),v.a.createElement("div",null,v.a.createElement("small",{ref:function(t){e.addCommentErrorElement=t},id:"comment-error",className:"error hide msB"})))}},{key:"renderEditCommentBox",value:function(){var e=this,t=this.state,a=t.editDisabled,n=t.editedDescription;return v.a.createElement("div",{className:"comment-edit msT"},v.a.createElement(D.a,{onChange:this.onEdit,textValue:n,classNames:"min-height-s max-height-s"}),v.a.createElement("p",{className:"psT psB forum-btn-group"},v.a.createElement("a",{onClick:this.saveEdit,className:N()("btn msR btn-small update-reply",{disabled:a})},"Update"),v.a.createElement("a",{onClick:function(){e.setState({showEditCommentBox:!1})},className:"error small cancel-update-comment"},v.a.createElement("i",{className:"icon-cancel-small"}),"cancel")),v.a.createElement("div",null,v.a.createElement("small",{ref:function(t){e.editCommentErrorElement=t},id:"comment-error",className:"error hide msB"})))}},{key:"renderDiscussionExpertBox",value:function(){var e=this.props,t=e.comment,a=e.profile;if(!t.experts||0===t.experts.length||t.deleted||a.id!==t.hacker_id)return null;var n=t.experts.filter((function(e){return 2===e.status})).length;return v.a.createElement("div",{className:"discussion-expert-box clearfix"},v.a.createElement("p",{className:"discussion-expert-line"},v.a.createElement("span",{className:"discussion-expert-text small bold"},0===n?"Waiting for reply from experts":"Answered by ".concat(n," of ").concat(t.experts.length," experts")),v.a.createElement("span",{className:"discussion-expert-images"},t.experts.map((function(e){return v.a.createElement("img",{key:e.hacker.id,src:e.hacker.avatar,rel:"tooltip","data-original-title":e.hacker.name||e.hacker.username,"data-expert-id":e.hacker.id,width:"26",height:"26",className:N()("cursor discussion-expert-image",{"discussion-expert-answered":2===e.status})})})))))}},{key:"renderSeeMore",value:function(){var e=this.props,t=e.challenge,a=e.comment;if(!a.has_children)return null;if(a.total_children===a.children.length)return null;var n=a.has_children&&0===a.children.length?"View Thread":"View more Comments..";return v.a.createElement(C.Link,{className:"btn-text see-more-comments",to:"".concat(Object(F.f)(t),"/forum/comments/").concat(a.id),target:"_blank",rel:"noopener noreferrer","data-analytics":"ForumCommentSeeMore","data-attr1":t.slug,"data-attr2":a.hacker_username,"data-attr11":a.hacker_is_admin},n)}},{key:"render",value:function(){var e=this.props,t=e.comment,a=e.commentsDict,n=e.challenge,r=e.contestSlug,s=this.state,c=s.showAddCommentBox,o=s.showEditCommentBox,l=s.minimize;return v.a.createElement("div",{className:"single-comment"},v.a.createElement("li",{className:N()("discussion-comment clearfix",{"more-width":!0,"is-collapsed":l})},v.a.createElement("div",{className:N()("discussion-meta",{"more-width":!0})},v.a.createElement("div",{className:"discussion-root-node-knob"},v.a.createElement("p",null,v.a.createElement("i",{onClick:this.toggleCollapse,className:"icon--single icon-plus maximize-comment"}),v.a.createElement("i",{onClick:this.toggleCollapse,className:"icon--single icon-minus minimize-comment"}))),v.a.createElement("div",{className:"discussion-avatar avatar"},v.a.createElement(B.a,{name:t.hacker_name,size:40,avatar:t.hacker_avatar,avatarClass:"comment-item-avatar"}))),v.a.createElement("div",{className:N()("discussion-main forum-post-abtest",{"more-width":!0})},v.a.createElement("div",{className:"comment-section"},this.renderCommentHeader(),this.renderCommentAppreciationBox(),!o&&this.renderCommentContent(),o&&this.renderEditCommentBox(),this.renderCommentFooter(),this.renderDiscussionExpertBox(),c&&this.renderAddCommentBox()),t.children&&t.children.length>0&&v.a.createElement(w.a,null,v.a.createElement("ul",{className:N()("has-string children-comments",{hide:l})},t.children.map((function(e){return v.a.createElement(z,{key:e,comment:a[e],challenge:n,contestSlug:r})})))),!l&&v.a.createElement("div",null,this.renderSeeMore()))))}}]),a}(v.a.Component);f()(V,"propTypes",{comment:y.a.object.isRequired,challenge:y.a.object.isRequired,contestSlug:y.a.string,profile:y.a.object.isRequired,commentsDict:y.a.object.isRequired,forumActions:y.a.object.isRequired,profileActions:y.a.object.isRequired,appUtil:y.a.object.isRequired});var z=Object(x.c)((function(e){return{profile:e.community.profile,commentsDict:e.community.forum.commentsDict}}),(function(e){return{forumActions:Object(S.b)(P.a,e),profileActions:Object(S.b)(q.a,e)}}))(V);z=Object(T.a)(z),t.a=z},"kDg/":function(e,t,a){},rlHG:function(e,t,a){},zgtW:function(e,t,a){"use strict";a.r(t),a.d(t,"mapStateToProps",(function(){return R})),a.d(t,"PureSingleCommentView",(function(){return A}));a("a1Th"),a("h7Nl"),a("I5cv");var n=a("lwsE"),r=a.n(n),s=a("W8MJ"),c=a.n(s),o=a("7W2i"),l=a.n(o),i=a("a1gu"),m=a.n(i),d=a("Nsbk"),u=a.n(d),p=a("lSNA"),h=a.n(p),g=a("cDcd"),f=a.n(g),E=a("17x9"),v=a.n(E),b=a("MGin"),y=a("ANjH"),k=a("/MKj"),N=a("5J+W"),C=a("z5MK"),x=a("PbPj"),S=a("XFB+"),_=a("cK/l"),w=a("7fp8");function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=u()(e);if(t){var r=u()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var A=function(e){l()(a,e);var t=D(a);function a(){return r()(this,a),t.apply(this,arguments)}return c()(a,[{key:"renderSingleCommentContainer",value:function(){var e=this.props,t=e.challenge,a=e.contestSlug,n=e.comment;return f.a.createElement("ul",{className:"has-string discussion-comments"},f.a.createElement("div",{className:"banner mlB"},f.a.createElement("p",null,"You are viewing a single comment's thread."," ",f.a.createElement(b.Link,{to:"".concat(Object(_.f)(t),"/forum"),"data-analytics":"ForumAllComments","data-attr1":t.slug,"data-attr2":n.hacker_username,"data-attr7":n.votes,"data-attr11":n.hacker_is_admin},"Return to all comments â†’"))),f.a.createElement(S.a,{comment:n,challenge:t,contestSlug:a}))}},{key:"render",value:function(){return f.a.createElement("div",{className:"container panes-container clearfix"},f.a.createElement(x.a,{recaptchaKey:w.c.RECAPTCHA_KEY_V3}),f.a.createElement(C.a,null,f.a.createElement(C.a.Content,{className:"tab-content pjA"},this.renderSingleCommentContainer())))}}]),a}(f.a.Component);function R(e,t){var a=t.appUtil.params,n=a.contestSlug,r=a.commentId,s=e.community.forum.commentsDict;return{challenge:Object(_.d)(e,a).detail,contestSlug:n,comment:s[r]}}h()(A,"propTypes",{challenge:v.a.object.isRequired,comment:v.a.object.isRequired,contestSlug:v.a.string}),t.default=Object(y.d)(N.a,Object(k.c)(R,{}))(A)}}]);
//# sourceMappingURL=https://hrcdn.net/community-frontend/assets/sourcemaps/hackerrank_r_forum-587e5d06a4.js.map